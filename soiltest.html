<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Soil Records | Smart Farm</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&family=DM+Serif+Display&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Nunito',sans-serif}


body{
  min-height:100vh;
  padding:50px;
  background:
    radial-gradient(circle at 15% 25%,#bbf7d0 0%,transparent 45%),
    radial-gradient(circle at 85% 20%,#99f6e4 0%,transparent 45%),
    linear-gradient(120deg,#f0fdf4,#ecfeff);
}


.container{
  max-width:1500px;
  margin:auto;
  display:grid;
  grid-template-columns:420px 1fr;
  gap:45px;
}


.card{
  background:white;
  border-radius:32px;
  padding:36px;
  box-shadow:0 30px 70px rgba(0,0,0,.12);
  animation:fadeUp .9s ease;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:translateY(0)}
}


h2{
  font-family:'DM Serif Display',serif;
  text-align:center;
  font-size:28px;
  color:#064e3b;
  margin-bottom:26px;
}


label{
  margin-top:18px;
  display:block;
  font-weight:800;
  color:#065f46;
}

input{
  width:100%;
  margin-top:6px;
  padding:15px 18px;
  border-radius:20px;
  border:2px solid transparent;
  background:#f0fdf4;
  font-size:15px;
}

input:focus{
  outline:none;
  border-color:#22c55e;
  background:white;
}

.invalid{
  border-color:#dc2626!important;
  background:#fee2e2!important;
}

small{
  color:#dc2626;
  font-weight:700;
  font-size:13px;
}


button{
  width:100%;
  margin-top:32px;
  padding:18px;
  border:none;
  border-radius:50px;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  color:#064e3b;
  font-size:16px;
  font-weight:900;
  cursor:pointer;
  transition:.4s;
}

button:hover{
  transform:translateY(-4px) scale(1.05);
  box-shadow:0 18px 40px rgba(34,197,94,.45);
}


.table-wrap{overflow-x:auto}

table{
  width:100%;
  border-collapse:separate;
  border-spacing:0 14px;
}

thead th{
  padding:14px;
  font-weight:900;
  color:#065f46;
  text-align:center;
}

tbody tr{
  background:#f0fdf4;
  box-shadow:0 10px 25px rgba(0,0,0,.08);
  animation:rowAdd .5s ease;
}

@keyframes rowAdd{
  from{opacity:0;transform:translateX(30px)}
  to{opacity:1;transform:translateX(0)}
}

tbody tr:hover{
  background:#dcfce7;
  transform:scale(1.03);
}

td{
  padding:15px;
  text-align:center;
  font-weight:700;
}

tbody tr td:first-child{border-radius:22px 0 0 22px}
tbody tr td:last-child{border-radius:0 22px 22px 0}


.action{
  padding:7px 16px;
  border:none;
  border-radius:18px;
  font-size:12px;
  font-weight:800;
  cursor:pointer;
  margin:2px;
  transition:.3s;
}

.view{background:#fde68a}
.edit{background:#93c5fd}
.delete{background:#fca5a5}

.action:hover{transform:scale(1.25)}

@media(max-width:900px){
  .container{grid-template-columns:1fr}
}
</style>
</head>

<body>

<div class="container">


<div class="card">
<h2>ðŸŒ± Soil Test Entry</h2>

<label>Plot Name</label>
<input id="plot">
<small id="e1"></small>

<label>pH Level (0â€“14)</label>
<input type="number" id="ph">
<small id="e2"></small>

<label>Moisture (%)</label>
<input type="number" id="moisture">
<small id="e3"></small>

<label>Nitrogen</label>
<input type="number" id="n">

<label>Phosphorus</label>
<input type="number" id="p">

<label>Potassium</label>
<input type="number" id="k">

<label>Salinity</label>
<input type="number" id="salinity">

<button onclick="save()">Save / Update</button>
</div>


<div class="card">
<h2>ðŸ“‹ Soil Records</h2>
<div class="table-wrap">
<table>
<thead>
<tr>
<th>Plot</th><th>pH</th><th>Moisture</th>
<th>N</th><th>P</th><th>K</th><th>Salinity</th><th>Action</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>
</div>

</div>
<script src="soiltest.js"></script>
<script>
let records=[];
let editIndex=-1;


const plot=document.getElementById("plot");
const ph=document.getElementById("ph");
const moisture=document.getElementById("moisture");
const n=document.getElementById("n");
const p=document.getElementById("p");
const k=document.getElementById("k");
const salinity=document.getElementById("salinity");
const tbody=document.getElementById("tbody");

function clearErrors(){
  [plot,ph,moisture].forEach(i=>i.classList.remove("invalid"));
  e1.innerText=e2.innerText=e3.innerText="";
}

function save(){
  clearErrors();
  let ok=true;

  if(!/^[A-Za-z ]{3,}$/.test(plot.value)){
    e1.innerText="Minimum 3 letters only";
    plot.classList.add("invalid");
    ok=false;
  }

  if(ph.value===""||ph.value<0||ph.value>14){
    e2.innerText="pH must be 0â€“14";
    ph.classList.add("invalid");
    ok=false;
  }

  if(moisture.value===""||moisture.value<0){
    e3.innerText="Invalid moisture";
    moisture.classList.add("invalid");
    ok=false;
  }

  if(!ok) return;

  const data={
    plot:plot.value,
    ph:ph.value,
    moisture:moisture.value,
    n:n.value,
    p:p.value,
    k:k.value,
    salinity:salinity.value
  };

  if(editIndex===-1) records.push(data);
  else records[editIndex]=data;

  editIndex=-1;
  document.querySelectorAll("input").forEach(i=>i.value="");
  render();
}

function render(){
  tbody.innerHTML="";
  records.forEach((r,i)=>{
    tbody.innerHTML+=`
    <tr>
      <td>${r.plot}</td>
      <td>${r.ph}</td>
      <td>${r.moisture}%</td>
      <td>${r.n}</td>
      <td>${r.p}</td>
      <td>${r.k}</td>
      <td>${r.salinity}</td>
      <td>
        <button class="action view" onclick="view(${i})">View</button>
        <button class="action edit" onclick="edit(${i})">Edit</button>
        <button class="action delete" onclick="del(${i})">Delete</button>
      </td>
    </tr>`;
  });
}

function view(i){
  let r=records[i];
  alert(`Plot: ${r.plot}\npH: ${r.ph}\nMoisture: ${r.moisture}%`);
}

function edit(i){
  let r=records[i];
  plot.value=r.plot;
  ph.value=r.ph;
  moisture.value=r.moisture;
  n.value=r.n;
  p.value=r.p;
  k.value=r.k;
  salinity.value=r.salinity;
  editIndex=i;
}

function del(i){
  if(confirm("Delete record?")){
    records.splice(i,1);
    render();
  }
}
</script>

</body>
</html>
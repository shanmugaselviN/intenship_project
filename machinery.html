<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Farm | Machinery Module</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  min-height:100vh;
  padding:35px;
  background:
    radial-gradient(circle at top left,#c1fba4,#e8fff1),
    radial-gradient(circle at bottom right,#9ae6b4,#d9f99d);
  animation:bgPulse 12s ease-in-out infinite alternate;
}

@keyframes bgPulse{
  from{filter:hue-rotate(0deg);}
  to{filter:hue-rotate(25deg);}
}

.container{
  max-width:1250px;
  margin:auto;
  display:grid;
  grid-template-columns:430px 1fr;
  gap:36px;
  animation:fadeUp 1.1s ease;
}

@keyframes fadeUp{
  from{opacity:0;transform:translateY(25px);}
  to{opacity:1;transform:translateY(0);}
}

.card{
  background:rgba(255,255,255,.88);
  backdrop-filter:blur(14px);
  padding:30px;
  border-radius:32px;
  box-shadow:0 30px 70px rgba(0,0,0,.25);
  position:relative;
}

.card::before{
  content:"";
  position:absolute;
  inset:0;
  padding:2px;
  border-radius:32px;
  background:linear-gradient(135deg,#16a34a,#4ade80,#22c55e);
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;
          mask-composite:exclude;
  pointer-events:none;
}

h2{
  font-family:'Montserrat',sans-serif;
  text-align:center;
  font-size:23px;
  font-weight:800;
  letter-spacing:1px;
  color:white;
  padding:18px;
  border-radius:24px;
  margin-bottom:26px;
  background:linear-gradient(135deg,#14532d,#22c55e);
  box-shadow:0 10px 25px rgba(34,197,94,.45);
}

label{
  display:block;
  margin-top:16px;
  font-weight:700;
  color:#14532d;
}

input,select,textarea{
  width:100%;
  margin-top:6px;
  padding:15px;
  border-radius:18px;
  border:2px solid #bbf7d0;
  background:#f0fdf4;
  font-weight:600;
  transition:.35s;
}

input:focus,select:focus,textarea:focus{
  outline:none;
  border-color:#22c55e;
  box-shadow:0 0 0 4px rgba(34,197,94,.25);
  transform:scale(1.02);
}

.invalid{
  border-color:#ef4444!important;
  background:#fee2e2;
}

small{
  font-size:12px;
  font-weight:700;
  color:#dc2626;
}

button{
  width:100%;
  margin-top:30px;
  padding:18px;
  border:none;
  border-radius:40px;
  background:linear-gradient(135deg,#22c55e,#15803d);
  color:white;
  font-size:16px;
  font-weight:800;
  cursor:pointer;
  transition:.4s;
}

button:hover{
  transform:translateY(-4px) scale(1.03);
  box-shadow:0 20px 40px rgba(34,197,94,.5);
}

table{
  width:100%;
  border-collapse:collapse;
  border-radius:22px;
  overflow:hidden;
}

thead th{
  background:linear-gradient(135deg,#064e3b,#16a34a);
  color:white;
  padding:15px;
  font-weight:800;
}

tbody td{
  padding:13px;
  text-align:center;
  font-weight:600;
  background:#ecfdf5;
  border-bottom:1px solid #bbf7d0;
}

tbody tr:nth-child(even) td{background:#d1fae5;}

.badge{
  padding:7px 18px;
  border-radius:22px;
  font-weight:800;
  font-size:12px;
}

.Idle{background:#86efac;}
.Active{background:#fde047;color:#422006;}
.Maintenance{background:#f87171;color:white;}

.action{
  padding:7px 14px;
  border:none;
  border-radius:18px;
  font-size:12px;
  font-weight:800;
  cursor:pointer;
  margin:3px;
  color:white;
}

.edit{background:#16a34a;}
.delete{background:#dc2626;}

@media(max-width:900px){
  .container{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="container">

<div class="card">
<h2>ðŸšœ Machinery Entry</h2>

<label>Machine Name</label>
<input id="machine">
<small id="mErr"></small>

<label>Type</label>
<select id="type">
<option value="">Select Type</option>
<option>Tractor</option>
<option>Harvester</option>
<option>Plough</option>
<option>Sprayer</option>
</select>
<small id="tErr"></small>

<label>Status</label>
<select id="status">
<option value="">Select Status</option>
<option>Idle</option>
<option>Active</option>
<option>Maintenance</option>
</select>
<small id="sErr"></small>

<label>Assigned Farmer</label>
<input id="farmer">
<small id="fErr"></small>

<label>Remarks</label>
<textarea id="remarks"></textarea>
<small id="rErr"></small>

<button onclick="saveMachine()">Save Machinery</button>
</div>

<div class="card">
<h2>ðŸ“‹ Machinery Records</h2>
<table>
<thead>
<tr>
<th>Machine</th>
<th>Type</th>
<th>Status</th>
<th>Farmer</th>
<th>Remarks</th>
<th>Action</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>
<script src="machinery.js"></script>
</div>

<script>
const machine = document.getElementById("machine");
const type = document.getElementById("type");
const statusEl = document.getElementById("status"); // FIX
const farmer = document.getElementById("farmer");
const remarks = document.getElementById("remarks");
const tbody = document.getElementById("tbody");

let machines = [], editIndex = -1;

function textOnly(v){
  return /^[A-Za-z .]+$/.test(v);
}

function clearErrors(){
  ["mErr","tErr","sErr","fErr","rErr"].forEach(e=>document.getElementById(e).innerText="");
  [machine,type,statusEl,farmer,remarks].forEach(f=>f.classList.remove("invalid"));
}

function saveMachine(){
  clearErrors();
  let ok = true;

  if(!machine.value.trim() || !textOnly(machine.value)){
    mErr.innerText="Only letters"; machine.classList.add("invalid"); ok=false;
  }
  if(!type.value){
    tErr.innerText="Select type"; type.classList.add("invalid"); ok=false;
  }
  if(!statusEl.value){
    sErr.innerText="Select status"; statusEl.classList.add("invalid"); ok=false;
  }
  if(!farmer.value.trim() || !textOnly(farmer.value)){
    fErr.innerText="Only letters"; farmer.classList.add("invalid"); ok=false;
  }
  if(!remarks.value.trim()){
    rErr.innerText="Required"; remarks.classList.add("invalid"); ok=false;
  }

  if(!ok) return;

  let data={
    machine:machine.value,
    type:type.value,
    status:statusEl.value,
    farmer:farmer.value,
    remarks:remarks.value
  };

  editIndex==-1 ? machines.push(data) : machines[editIndex]=data;
  editIndex=-1;

  [machine,type,statusEl,farmer,remarks].forEach(f=>f.value="");
  render();
}

function render(){
  tbody.innerHTML="";
  machines.forEach((m,i)=>{
    tbody.innerHTML+=`
    <tr>
      <td>${m.machine}</td>
      <td>${m.type}</td>
      <td><span class="badge ${m.status}">${m.status}</span></td>
      <td>${m.farmer}</td>
      <td>${m.remarks}</td>
      <td>
        <button class="action edit" onclick="editMachine(${i})">Edit</button>
        <button class="action delete" onclick="delMachine(${i})">Delete</button>
      </td>
    </tr>`;
  });
}

function editMachine(i){
  let m=machines[i];
  machine.value=m.machine;
  type.value=m.type;
  statusEl.value=m.status;
  farmer.value=m.farmer;
  remarks.value=m.remarks;
  editIndex=i;
}

function delMachine(i){
  if(confirm("Delete record?")){
    machines.splice(i,1);
    render();
  }
}
</script>

</body>
</html>